<!DOCTYPE html>
<html lang="zh-Hant">
<head>

    <meta charset="UTF-8">
    <!-- Google Tag Manager -->
    <script>(function (w, d, s, l, i) {
        w[l] = w[l] || [];
        w[l].push({
            'gtm.start':
                new Date().getTime(), event: 'gtm.js'
        });
        var f = d.getElementsByTagName(s)[0],
            j = d.createElement(s), dl = l != 'dataLayer' ? '&l=' + l : '';
        j.async = true;
        j.src =
            'https://www.googletagmanager.com/gtm.js?id=' + i + dl;
        f.parentNode.insertBefore(j, f);
    })(window, document, 'script', 'dataLayer', 'GTM-W2B9C87');</script>
    <!-- End Google Tag Manager -->

    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=1">

    <link rel="apple-touch-icon" sizes="180x180" href="icon_folder/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icon_folder/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icon_folder/favicon-16x16.png">
    <!--    <link rel="manifest" href="icon_folder/site.webmanifest">-->
    <link rel="mask-icon" href="icon_folder/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="theme-color" content="#ffffff">

    <title>Been Play</title>

    <link rel="stylesheet"
          href="https://cdnjs.cloudflare.com/ajax/libs/datatables/1.10.21/css/jquery.dataTables.min.css"
          integrity="sha512-1k7mWiTNoyx2XtmI96o+hdjP8nn0f3Z2N4oF/9ZZRgijyV4omsKOXEnqL1gKQNPy2MTSP9rIEWGcH/CInulptA=="
          crossorigin="anonymous" referrerpolicy="no-referrer"/>

    <link rel="stylesheet"
          href="https://cdnjs.cloudflare.com/ajax/libs/datatables.net-responsive-bs5/2.3.0/responsive.bootstrap5.min.css"
          integrity="sha512-F4qNDxOqSXOoJ5LuO78wdzZGb4BcUqF6+o+FYjgp4hFElfceMljk5a6RnVluCJS7SrEkIZyThWJjC60DMXmzJw=="
          crossorigin="anonymous" referrerpolicy="no-referrer"/>

    <link rel="stylesheet"
          href="https://cdnjs.cloudflare.com/ajax/libs/datatables.net-buttons-bs5/2.2.3/buttons.bootstrap5.min.css"
          integrity="sha512-VX0h3jcn1Oc0lFy0aRxuq6U/tTk/6Ryurar5O3Az2DHLA1mpURv2Zgzl5MJJ5weChE7rdlsiB/ka5rUstkTN8g=="
          crossorigin="anonymous" referrerpolicy="no-referrer"/>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.2.1/css/bootstrap.min.css"
          integrity="sha512-siwe/oXMhSjGCwLn+scraPOWrJxHlUgMBMZXdPe2Tnk3I0x3ESCoLz7WZ5NTH6SZrywMY+PB1cjyqJ5jAluCOg=="
          crossorigin="anonymous" referrerpolicy="no-referrer"/>

    <link rel="stylesheet"
          href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.9.1/font/bootstrap-icons.min.css"
          integrity="sha512-5PV92qsds/16vyYIJo3T/As4m2d8b6oWYfoqV+vtizRB6KhF1F9kYzWzQmsO6T3z3QG2Xdhrx7FQ+5R1LiQdUA=="
          crossorigin="anonymous" referrerpolicy="no-referrer"/>
    <style>
        table.dataTable.dtr-inline.collapsed > tbody > tr > td.dtr-control,
        table.dataTable.dtr-inline.collapsed > tbody > tr > th.dtr-control {
            position: relative;
            padding-left: 50px;
            cursor: pointer;
        }

        .dt-buttons {
            display: flex;
            flex-flow: wrap;
            border: thick double #0d6efd;
        }

        .dt-buttons > button {
            margin: 8px;
        }

        img {
            max-width: 300px;
            height: auto;
            image-rendering: crisp-edges;
        }

        .btn:hover {
            color: #fff;
        }


        td {
            word-wrap: break-word;
        }
    </style>


</head>

<body>
<!-- Google Tag Manager (noscript) -->
<noscript>
    <iframe src="https://www.googletagmanager.com/ns.html?id=GTM-W2B9C87"
            height="0" width="0" style="display:none;visibility:hidden"></iframe>
</noscript>
<!-- End Google Tag Manager (noscript) -->
<br>
<div class="container-fluid">
    <div class="row">
        <div class="col">
            <div class="form-check form-switch" style="display: flex; justify-content: center; align-items: center">
                <input class="form-check-input col-form-label-lg" type="checkbox" id="flexSwitchCheckChecked"
                       onchange="modeSwitch()" checked>
                <label class="form-check-label form-control-lg" for="flexSwitchCheckChecked">
                    Light or Dark mode</label>
            </div>
        </div>

    </div>
    <div class="row">
        <div class="col">
            <table id="exhibition" class="table align-middle display responsive nowrap caption-top" style="width:100%">
                <caption>
                    <div class="card bg-warning">
                        <h5 class="card-header caption-card-header"></h5>
                        <div class="card-body caption-card-body"></div>
                        <div class="card-footer caption-card-footer"></div>
                    </div>
                </caption>
                <thead>
                <tr>
                    <th>å±•è¦½åç¨±</th>
                    <th>åœ–ç‰‡</th>
                    <th>æ—¥æœŸ</th>
                    <th>åœ°é»</th>
                    <th>åˆ†é¡</th>
                </tr>
                </thead>
            </table>
        </div>
    </div>

    <div class="row">
        <div class="col">
            <footer>
                <div class="card">
                    <div class="card-body">
                        æœ¬ç¶²é æ‰€æœ‰åŒ…å«ï¼Œä½†ä¸é™æ–¼å•†æ¨™ã€æ¨™èªŒã€åœ–åƒã€çŸ­ç‰‡ã€è²éŸ³æª”æ¡ˆã€é€£çµåŠå…¶ä»–è³‡æ–™ç­‰è³‡æ–™ä¾†æºï¼ˆä»¥ä¸‹ç°¡ç¨±ã€Œè³‡æ–™é›†ã€ï¼‰ï¼Œ
                        åƒ…ä¾›<a href="https://justiceqaq.github.io/">@JustIceQAQ</a>ä½œç‚ºSide Project æŠ€è¡“å±•ç¤ºç”¨é€”ã€‚

                        æœ¬ç¶²é è³‡æ–™é›†æœƒæä¾›é€£çµè‡³å…¶ä»–æ©Ÿæ§‹ç¶²é ï¼Œä½†é€™äº›ç¶²é ä¸¦ä¸æ˜¯ç”±<a href="https://justiceqaq.github.io/">@JustIceQAQ</a>æ‰€æ§åˆ¶ã€‚
                        æœ¬ç¶²é ä¸æœƒå°é€™äº›ç¶²é æ‰€é¡¯ç¤ºçš„å…§å®¹ä½œå‡ºä»»ä½•ä¿è­‰æˆ–æ‰¿æ“”ä»»ä½•è²¬ä»»ã€‚

                        è³‡æ–™é›†å¯¦éš›æœ€æ–°è³‡è¨Šè«‹è‡ªè¡Œæœå°‹è©²æ©Ÿæ§‹å®˜æ–¹ç¶²ç«™ã€‚
                    </div>
                </div>
            </footer>
        </div>
    </div>

</div>


</body>
<script src="https://cdnjs.cloudflare.com/ajax/libs/darkreader/4.9.58/darkreader.min.js"
        integrity="sha512-VU2WQDwarmassdMJUeWnlq0cSCmM0zkhLNa7UM22YOm06Y3vCEHW8jAywgleU0qnqXY1nQB0dFVH6HZkucyEKA=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>

<script>
    DarkReader.setFetchMethod(window.fetch)
    DarkReader.auto({
        brightness: 100,
        contrast: 90,
        sepia: 10
    });
</script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.1/jquery.min.js"
        integrity="sha512-aVKKRRi/Q/YV+4mjoKBsE4x3H+BkegoM/em46NNlCqNTmUYADjBbeNefNxYV7giUp0VxICtqdrbqU7iVaeZNXA=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-ajax-localstorage-cache/2.0.1/jalc.min.js"
        integrity="sha512-rhkfBTfRYBjxSBE4XxMUyDQ2kBXDrI/lIXHnyF2VB26pUiq3H4qZzsi+HQGtaxuJweoOuNyp031LUepkRy5tZA=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>

<script type="text/javascript" src="https://cdn.datatables.net/v/dt/dt-1.12.1/datatables.min.js"></script>

<script type="text/javascript"
        src="https://cdn.datatables.net/responsive/2.3.0/js/dataTables.responsive.min.js"></script>

<script type="text/javascript" src="https://cdn.datatables.net/buttons/2.2.3/js/dataTables.buttons.min.js"></script>
<script type="text/javascript"
        src="https://cdn.datatables.net/buttons/2.2.3/js/buttons.html5.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.4/moment-with-locales.min.js"
        integrity="sha512-42PE0rd+wZ2hNXftlM78BSehIGzezNeQuzihiBCvUEB3CVxHvsShF86wBWwQORNxNINlBPuq7rG4WWhNiTVHFg=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/moment-timezone/0.5.37/moment-timezone-with-data-2012-2022.min.js"
        integrity="sha512-8Qkh6To/T2f66DV4VGbRwjLNdsiYnx02iwsyobMVGC5IeyLBlny8hHEGypFdkB3n7YpAnx5rsescbHyDNIV9Sw=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>

<script src="my_table.js"></script>


<script>
    const changeThemeMode = (modeA, modelB) => {
        $(`link[href='${modeA}]']`).remove();
        $('head').append(`<link rel="stylesheet" type="text/css" href="${modelB}">`);
    }

    const modeSwitch = () => {
        const isEnabled = DarkReader.isEnabled();
        if (isEnabled) {
            DarkReader.auto(false);
            changeThemeMode('dark_mode_fix.css', "light_mode_fix.css")
        } else {
            DarkReader.auto(true);
            changeThemeMode("light_mode_fix.css", 'dark_mode_fix.css')
        }
    }

    moment.locale('zh-tw');
    $(document).ready(function () {
        const isEnabled = DarkReader.isEnabled();
        if (isEnabled) {
            changeThemeMode("light_mode_fix.css", 'dark_mode_fix.css')
            $("#flexSwitchCheckChecked").prop('checked', true);
        } else {
            changeThemeMode('dark_mode_fix.css', "light_mode_fix.css")
            $("#flexSwitchCheckChecked").prop('checked', false);

        }


        $('#exhibition').DataTable({
            dom: 'Brtip',
            processing: true,
            responsive: true,
            deferRender: true,
            ajax: {
                "url": `${URL_SOURCE}${exhibitionTopicClass[0].topic}.json`,
                localCache: true,
                cacheTTL: 0.5,
            },
            dataSrc: 'data',
            columns: [
                {
                    data: 'title',
                    render: function (data, type, row) {
                        console.log(row)
                        if (row.systematics === "BUG") {
                            return "æœ‰äº›æ„æ–™ä¹‹å¤–å¾—äº‹æƒ…ç™¼ç”Ÿäº†...ğŸ˜”ï¼Œç­‰æˆ‘ä¿®å¥½å‰è«‹å…ˆç›´æ¥å»å®˜ç¶²æŸ¥çœ‹å§~"
                        }
                        return `<a target="_blank" href="${row.source_url}"><div style="width:18rem;white-space:normal;word-break:break-all;">${data}</div></a>`
                    }
                },
                {
                    data: 'figure',
                    render: function (data, type, row) {
                        if (row.systematics === "BUG") {
                            return "ğŸ˜”"
                        }
                        return '<img src="' + data + '" loading="lazy" />';
                    }
                },
                {data: 'date'},
                {
                    data: 'address',
                    render: function (data, type, row) {
                        if (row.systematics === "BUG") {
                            return "ğŸ˜”"
                        }
                        return `<div style="width:18rem;white-space:normal;word-break:break-all;">${data}</div>`
                    }
                },
                {data: 'systematics'},
            ],
            columnDefs: [
                {targets: 0, responsivePriority: 1, className: 'table-bordered'},
                {targets: 1, responsivePriority: 10002},
                {targets: 2, responsivePriority: 1},
                {targets: 3, responsivePriority: 2},
                {targets: 4, responsivePriority: 2},

            ],
            buttons: customizeButtons,
            "drawCallback": function (settings) {
                if (settings.json !== undefined) {
                    let last_update = settings.json["last_update"];
                    let informationFullName = settings.json["information"]["fullname"]
                    let externalLink = settings.json["information"]["external_link"]
                    let externaLinkEle = ""
                    if (externalLink !== undefined) {
                        externaLinkEle = `<a class="btn btn-secondary" href="${externalLink}" target="_blank"><strong><i class="bi bi-box-arrow-up-right"></i></strong></a>`;
                    }
                    let opening = ""
                    if (settings.json["visit"] !== undefined) {
                        opening = settings.json["visit"]["opening"]
                    }

                    $(".caption-card-header").html(`ã€Š${informationFullName}ã€‹${externaLinkEle}`)
                    if (opening !== undefined && opening !== "") {
                        $(".caption-card-body").html(`${opening.replaceAll('\n', '<br>')}`)
                    } else {
                        $(".caption-card-body").empty()
                    }
                    $(".caption-card-footer").html(`è³‡æ–™æ›´æ–°æ™‚é–“: ${formatDate(last_update)}`)
                }
            },
            createdRow: function (row, data, dataIndex) {
                if (data.systematics === "BUG") {
                    $('td:eq(0)', row).attr('colspan', 5);
                    $('td:eq(1)', row).css('display', 'none');
                    $('td:eq(3)', row).css('display', 'none');
                    $('td:eq(2)', row).css('display', 'none');
                    $('td:eq(4)', row).css('display', 'none');
                    $('td:eq(0)', row).css({"text-align": "center", "font-size": "1.5rem"})
                    $('td:eq(0)', row).addClass("table-danger")
                }

            }
        });
    });
    const LOCALTZ = moment.tz.guess()
    const formatDate = (dateString) => {
        let date = moment(dateString).tz(LOCALTZ);
        return `${date.fromNow()} (${date.format("LLLL")})`
    }


</script>

</html>