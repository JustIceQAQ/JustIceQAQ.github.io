<!DOCTYPE html>
<html lang="zh-Hant">
<head>

    <meta charset="UTF-8">
    <!-- Google Tag Manager -->
    <script>(function (w, d, s, l, i) {
        w[l] = w[l] || [];
        w[l].push({
            'gtm.start':
                new Date().getTime(), event: 'gtm.js'
        });
        var f = d.getElementsByTagName(s)[0],
            j = d.createElement(s), dl = l != 'dataLayer' ? '&l=' + l : '';
        j.async = true;
        j.src =
            'https://www.googletagmanager.com/gtm.js?id=' + i + dl;
        f.parentNode.insertBefore(j, f);
    })(window, document, 'script', 'dataLayer', 'GTM-W2B9C87');</script>
    <!-- End Google Tag Manager -->

    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=1">

    <link rel="apple-touch-icon" sizes="180x180" href="icon_folder/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icon_folder/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icon_folder/favicon-16x16.png">
    <link rel="manifest" href="icon_folder/site.webmanifest">
    <link rel="mask-icon" href="icon_folder/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="theme-color" content="#ffffff">

    <title>Been Play</title>

    <link rel="stylesheet" type="text/css"
          href="https://cdn.datatables.net/v/dt/dt-1.12.1/datatables.min.css"/>
    <link rel="stylesheet" type="text/css"
          href="https://cdn.datatables.net/responsive/2.3.0/css/responsive.bootstrap5.min.css"/>
    <link rel="stylesheet" type="text/css"
          href="https://cdn.datatables.net/buttons/2.2.3/css/buttons.bootstrap5.min.css"/>
    <link rel="stylesheet" type="text/css" crossorigin="anonymous"
          integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
          href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.9.1/font/bootstrap-icons.css">
    <link rel="stylesheet" type="text/css" href="my_btn.css">
    <style>
        table.dataTable.dtr-inline.collapsed > tbody > tr > td.dtr-control,
        table.dataTable.dtr-inline.collapsed > tbody > tr > th.dtr-control {
            position: relative;
            padding-left: 50px;
            cursor: pointer;
        }

        .dt-buttons {
            display: flex;
            flex-flow: wrap;
            border: thick double #0d6efd;
        }

        .dt-buttons > button {
            margin: 10px;
        }
    </style>


</head>

<body>
<!-- Google Tag Manager (noscript) -->
<noscript>
    <iframe src="https://www.googletagmanager.com/ns.html?id=GTM-W2B9C87"
            height="0" width="0" style="display:none;visibility:hidden"></iframe>
</noscript>
<!-- End Google Tag Manager (noscript) -->
<br>
<div class="container-fluid">
    <div class="row">
        <div class="col">
            <div class="form-check form-switch" style="display: flex; justify-content: center; align-items: center">
                <input class="form-check-input col-form-label-lg" type="checkbox" id="flexSwitchCheckChecked"
                       onchange="modeSwitch()" checked>
                <label class="form-check-label form-control-lg" for="flexSwitchCheckChecked">
                    Light or Dark mode</label>
            </div>
        </div>

    </div>
    <div class="row">
        <div class="col">
            <table id="exhibition" class="table align-middle display responsive nowrap caption-top" style="width:100%">
                <caption class="lead text-decoration-underline" style="color: black;text-align: center"></caption>
                <thead>
                <tr>
                    <th>展覽名稱</th>
                    <th>圖片</th>
                    <th>日期</th>
                    <th>地點</th>
                    <th>分類</th>
                </tr>
                </thead>
            </table>
        </div>
    </div>

    <div class="row">
        <div class="col">
            <footer>
                <div class="card">
                    <div class="card-body">
                        本網頁所有包含，但不限於商標、標誌、圖像、短片、聲音檔案、連結及其他資料等資料來源（以下簡稱「資料集」），
                        僅供<a href="https://justiceqaq.github.io/">@JustIceQAQ</a>作為Side Project 技術展示用途。

                        本網頁資料集會提供連結至其他機構網頁，但這些網頁並不是由<a href="https://justiceqaq.github.io/">@JustIceQAQ</a>所控制。
                        本網頁不會對這些網頁所顯示的內容作出任何保證或承擔任何責任。

                        資料集實際最新資訊請自行搜尋該機構官方網站。
                    </div>
                </div>
            </footer>
        </div>
    </div>

</div>


</body>
<script src="https://cdn.jsdelivr.net/npm/darkreader@latest/darkreader.min.js"></script>
<script>
    DarkReader.setFetchMethod(window.fetch)
    DarkReader.auto({
        brightness: 100,
        contrast: 90,
        sepia: 10
    });
</script>

<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
<script type="text/javascript" src="https://cdn.datatables.net/v/dt/dt-1.12.1/datatables.min.js"></script>
<script type="text/javascript"
        src="https://cdn.datatables.net/responsive/2.3.0/js/dataTables.responsive.min.js"></script>
<script type="text/javascript" src="https://cdn.datatables.net/buttons/2.2.3/js/dataTables.buttons.min.js"></script>
<script type="text/javascript"
        src="https://cdn.datatables.net/buttons/2.2.3/js/buttons.html5.min.js"></script>
<script src="https://momentjs.com/downloads/moment-with-locales.min.js"></script>

<script src="my_table.js"></script>


<script>
    const changeThemeMode = (modeA, modelB) => {
        $(`link[href='${modeA}]']`).remove();
        $('head').append(`<link rel="stylesheet" type="text/css" href="${modelB}">`);
    }

    const modeSwitch = () => {
        const isEnabled = DarkReader.isEnabled();
        if (isEnabled) {
            DarkReader.auto(false);
            changeThemeMode('dark_mode_fix.css', "light_mode_fix.css")
        } else {
            DarkReader.auto(true);
            changeThemeMode("light_mode_fix.css", 'dark_mode_fix.css')
        }
    }

    moment.locale('zh-tw');
    $(document).ready(function () {
        const isEnabled = DarkReader.isEnabled();
        if (isEnabled) {
            changeThemeMode("light_mode_fix.css", 'dark_mode_fix.css')
            $("#flexSwitchCheckChecked").prop('checked', true);
        } else {
            changeThemeMode('dark_mode_fix.css', "light_mode_fix.css")
            $("#flexSwitchCheckChecked").prop('checked', false);

        }


        $('#exhibition').DataTable({
            dom: 'Bfrtip',
            processing: true,
            responsive: true,
            deferRender: true,
            ajax: `${URL_SOURCE}huashan1914_exhibition.json`,
            dataSrc: 'data',
            columns: [
                {
                    data: 'title',
                    render: function (data, type, row) {
                        return `<a target="_blank" href="${row.source_url}"><div style="width:18rem;white-space:normal;word-break:break-all;">${data}</div></a>`
                    }
                },
                {
                    data: 'figure',
                    render: function (data, type, row) {
                        return '<img src="' + data + '" loading="lazy" />';
                    }
                },
                {data: 'date'},
                {
                    data: 'address',
                    render: function (data, type, row) {
                        return `<div style="width:18rem;white-space:normal;word-break:break-all;">${data}</div>`
                    }
                },
                {data: 'systematics'},
            ],
            columnDefs: [
                {targets: 0, responsivePriority: 1, className: 'table-bordered'},
                {targets: 1, responsivePriority: 10002},
                {targets: 2, responsivePriority: 1},
                {targets: 3, responsivePriority: 2},
                {targets: 4, responsivePriority: 2},

            ],
            buttons: [
                {extend: 'huashan1914_exhibition', className: 'btn btn-huashan1914'},
                {extend: 'cksmh_exhibition', className: 'btn btn-cksmh'},
                {extend: 'mocataipei_exhibition', className: 'btn btn-mocataipei'},
                {extend: 'npm_exhibition', className: 'btn btn-npm'},
                {extend: 'ntm_exhibition', className: 'btn btn-ntm'},
                {extend: 'ntsec_exhibition', className: 'btn btn-ntsec'},
                {extend: 'songshanculturalpark_exhibition', className: 'btn btn-songshanculturalpark'},
                {extend: 'tfam_exhibition', className: 'btn btn-tfam'},
                {extend: 'tmc_exhibition', className: "btn btn-tmc"},
                {extend: 'nmh_exhibition', className: "btn btn-nmh"},
                {extend: 'twtc_exhibition', className: "btn btn-twtc"},
                {extend: 'books_exhibition', className: "btn btn-books"},
                {extend: 'udnfunlife_exhibition', className: "btn btn-udnfunlife"},

            ],
            "drawCallback": function (settings) {
                if (settings.json !== undefined) {
                    let last_update = settings.json["last_update"];
                    let informationFullName = settings.json["information"]["fullname"]
                    let externalLink = settings.json["information"]["external_link"]
                    let externaLinkEle = ""
                    if (externalLink !== undefined) {
                        externaLinkEle = `<a href="${externalLink}" target="_blank"><i class="bi bi-box-arrow-up-right" style="font-size: 2rem"></i></a>`;
                    }
                    $('#exhibition > caption').html(
                        `《${informationFullName}》<br> 最後更新時間: ${formatDate(last_update)} ${externaLinkEle}`
                    )
                }
            }
        });
    });

    const formatDate = (dateString) => {
        let date = moment(dateString);
        return `${date.fromNow()} (${new Date(dateString).toLocaleString()})`
    }


</script>

</html>